---
import "../styles/flickity.css";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 8);
---

<div
  class="carousel row-full"
  data-flickity='{ "groupCells": 1, "freeScroll": true, "wrapAround": true, "cellAlign": "right" }'
>
  <div class="carousel-cell">
    <section>
      <aside
        style="padding: 0px; height: 515px; border: 1px solid var(--color-secondary); background-color: var(--color-secondary-accent)"
      >
        <div style="padding:10px;">
          <span> 📌</span>
          <h3>Redes Sociales:</h3>
          <ul>
            <li>
              <a href="https://www.linkedin.com/in/srgrigo/" target="_blank"
                >Linkedin</a
              >
            </li>
            <li>
              <a href="https://github.com/sergiocomovas" target="_blank"
                >Github</a
              >
            </li>
            <!--<li><a href="https://twitter.com/sergiocomovas" target="_blank">Twitter (Cuenta Personal)</a></li>-->
            <li>
              <a href="https://twitch.tv/sergiocomovas" target="_blank"
                >Twitch</a
              >
            </li>
          </ul>
          <h3>Telegram:</h3>
          <ul>
            <li>
              <a href="https://t.me/canalpirata" target="_blank"
                >Telegram: Canal Pirata</a
              >
            </li>
            <li>
              <a href="https://t.me/chatpirata" target="_blank"
                >Telegram: Chat Pirata</a
              >
            </li>
          </ul>
          <h3>Referidos:</h3>
          <ul>
            <li>
              <a
                href="https://preply.com/es/?pref=MTEwMTEwMg==&id=1672603349.390458"
                target="_blank">Preply: clases de inglés</a
              >
            </li>
          </ul>
        </div>
      </aside>
    </section>
  </div>
  <div class="carousel-cell">
    <section>
      <aside
        style="padding: 0px; height: 515px; border: 1px solid var(--color-secondary); background-color: var(--color-secondary-accent)"
      >
        <div style="padding:10px;">
          <h3>⚙️ Dev; fronts:</h3>
          <ul>
            <li>
              <a href="https://cosasdev.comovas.es/" target="_blank"
                >React: Página Principal</a
              >
            </li>
            <li>
              <a href="https://sidet.cosasdev.comovas.es/" target="_blank"
                >Vue: Prueba para empresa balear en Vue 3</a
              >
            </li>
            <!--<li>
              <a href="https://micro.cosasdev.comovas.es/svelte" target="_blank"
                >Svelte: Laboratorios de Svelte JS</a
              >
            </li>
            <li>
              <a href="http://astroweb.comovas.es/" target="_blank"
                >Astro: Nueva web Proyecto</a
              >
            </li>-->
          </ul>
          <h3>⚙️ Dev; backs:</h3>
          <ul>
            <li>
              <a href="https://tbot.comovas.es/" target="_blank"
                >🔐PHP: CodeIgniter Tbot</a
              >
            </li>
            <li>
              <a href="https://express.cosasdev.comovas.es" target="_blank"
                >🔐NODE (API): Express.js</a
              >
            </li>
            <li>
              <a href="https://sbot.comovas.es/" target="_blank"
                >🔐NODE (Headless CMS): Strapi Sbot</a
              >
            </li>
            <li>
              <a href="https://express.cosasdev.comovas.es" target="_blank"
                >🔐NODE (Headless CMS): Gsx2json Gbot</a
              >
            </li>
            <li>
              <a href="https://telegraph.comovas.es" target="_blank"
                >🔐NODE (Headless CMS): Telegraf</a
              >
            </li>
          </ul>
        </div>
      </aside>
    </section>
  </div>

  <!--CARRUSEL-->
  {
    posts.map((x) => (
      <div class="carousel-cell" style="position: relative;">
        <section>
          <aside style="padding:0px; height: 515px; border: 1px solid var(--color-table); background-color: var(--color-primary-accent)">
            <figure
              class="figure-container"
              style=`background-image: url('${x.data?.heroImage ?? 'blog-placeholder-5.jpg'}');`
            />
						<div style="padding: 0px 0px 10px 10px">
            <h2 style="margin:0px;">{x.data.title}</h2>
						<p style="margin:0px; opacity:0.5">{x.data.description}</p>
						</div>

						<figure class="figure-button">
							<a  href={`/blog/${x.slug}/`}style="padding:20px;" href="#">
								<button>Seguir leyendo</button>
							</a>
						</figure>
						
						
          </aside>
        </section>
      </div>
    ))
  }
</div>
<style>
  .figure-container {
    border-radius: 5px 5px 0px 0px;
    margin: 0;
    padding: 0;
    height: 284px !important;
    width: 284px !important;
    background-size: cover;
    background-position: center center;
  }


	.figure-button {
    border-radius: 0px 0px 5px 5px;
		position: absolute; 
		bottom: 17px;
    margin: 0;
    padding: 0;
    height: 100px !important;
    width: 284px !important;
    background-image: linear-gradient(to top, navy 25%, transparent);
  }
</style>
<!--<script src="../scripts/flickity.js"></script> -->

